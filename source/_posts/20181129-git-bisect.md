---
title: git bisect äºŒåˆ†æ³•æŸ¥æ‰¾é—®é¢˜commit
date: 2018-11-29 11:47:01
tags: [git, äºŒåˆ†æ³•, debug, bisect]
category: git
---

å‰å‡ å¤©åˆšçœ‹åˆ°ä¸€ä¸ª git command: `git bisect`ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°å±…ç„¶è¿™ä¹ˆå¿«å°±ç”¨ä¸Šäº†ï¼ŒçœŸæ˜¯å°´å°¬ã€‚æ›´å°´å°¬çš„æ˜¯ï¼Œdebug äº†åŠå¤©æœ€åå‘ç°æ˜¯è‡ªå·±çš„ commit å‡ºé—®é¢˜ ğŸ˜†

åœ¨è½¯ä»¶å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºæµ‹è¯•è¦†ç›–ç‡ä½ï¼Œæ²¡æ—¶é—´å›å½’æµ‹è¯•ç­‰ç­‰åŸå› ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µå°±æ˜¯ï¼ŒæŸä¸ª feature æ˜æ˜å‰å‡ å¤©è¿˜å¥½å¥½çš„ï¼Œä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹å°±å‡º Bug äº†â€¦â€¦ç„¶å hmmï¼Œæœ€ç¬¨çš„æ–¹æ³•å°±æ˜¯å€’å›å»ä¸€ä¸ªä¸€ä¸ª commit çš„ checkout å‡ºæ¥æŸ¥æ‰¾å•¦ï¼Œç¨å¾®æ²¡é‚£ä¹ˆç¬¨çš„æ–¹æ³•å°±æ˜¯è·Ÿç‰ˆæœ¬æ¥æŸ¥æ‰¾ï¼Œç„¶åæ‰‹åŠ¨äººå·¥ç”¨äºŒåˆ†æ³•ï¼ˆæˆ‘ä»¥å‰å°±ä¸€ç›´æ˜¯è¿™ä¹ˆåšçš„ï¼Œè¿˜ä»¥ä¸ºè‡ªå·±å¾ˆèªæ˜å‘¢ï¼Œæ•° commit æ•°åˆ°å¤´æ™• ğŸ˜‚ï¼‰

## git bisect

> This command uses a binary search algorithm to find which commit in your projectâ€™s history introduced a bug. [^1]

`git bisect`åšçš„äº‹æƒ…å…¶å®å°±è·Ÿäººæ‰‹åšçš„äº‹æƒ…æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸ç”¨è‡ªå·±å»æ•° commitï¼Œcommand ä¼šè‡ªåŠ¨å®šä½åˆ°äºŒåˆ†æ³•åŒºé—´ä¸­ç‚¹çš„ commit å¹¶ checkout

ä¸¾ä¸ª ğŸŒ°ï¼š
å‡å¦‚åœ¨ develop åˆ†æ”¯ä¸­æœ‰ ABCDEFG è¿™å‡ ä¸ª commitï¼ŒA æœ€æ–°ï¼ŒG æœ€æ—§ï¼Œå·² A æœ‰ bug ä½† G æ²¡æœ‰ bugï¼Œæƒ³è¦æ‰¾å‡º A-G ä¸­æœ€æ—©å‡ºç° bug çš„ commitï¼Œå‡è®¾æœ€ç»ˆæ‰¾åˆ°æœ‰ bug çš„ commit æ˜¯ Eã€‚

é‚£ä¹ˆé¦–å…ˆ checkout develop åˆ†æ”¯ï¼Œç„¶å

```
git bisect start
git bisect bad
```

ç„¶å checkout G commit

```
git bisect good
```

æ­¤æ—¶ git ä¼šè‡ªåŠ¨ checkout D commit å¹¶æ˜¾ç¤ºè¿˜å‰©ä¸‹ 3 ä¸ª commit éœ€è¦æ£€æŸ¥ï¼Œç„¶åæˆ‘ä»¬ä¸åœçš„é‡å¤ä»¥ä¸Šæ ‡è®°`good`å’Œ`bad`çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰¾å‡ºæœ‰é—®é¢˜çš„ commit Eï¼Œæ­¤æ—¶ä¼šæ˜¾ç¤ºè¿˜å‰©ä¸‹ 0 ä¸ª commit éœ€è¦æ£€æŸ¥ï¼Œ è®°ä¸‹è¿™ä¸ª commit çš„ hashï¼ˆä¸çŸ¥é“è¿™ä¸€æ­¥æœ‰æ²¡æœ‰ä»€ä¹ˆè‡ªåŠ¨è®°ä¸‹çš„æ–¹æ³•ï¼Ÿï¼‰ï¼Œç„¶å

```
git bisect reset
```

ä¹‹åä¼šè‡ªåŠ¨å›åˆ° develop åˆ†æ”¯ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹ fixup äº†ã€‚

ä»¥ä¸Šã€‚

[^1]: https://git-scm.com/docs/git-bisect
