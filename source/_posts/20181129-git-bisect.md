---
title: git bisect äºŒåˆ†æ³•æŸ¥æ‰¾é—®é¢˜commit
date: 2018-11-29 11:47:01
tags: [git, äºŒåˆ†æ³•, debug, bisect]
category: git
---
å‰å‡ å¤©åˆšçœ‹åˆ°ä¸€ä¸ªgit command: `git bisect`ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°å±…ç„¶è¿™ä¹ˆå¿«å°±ç”¨ä¸Šäº†ï¼ŒçœŸæ˜¯å°´å°¬ã€‚æ›´å°´å°¬çš„æ˜¯ï¼Œdebugäº†åŠå¤©æœ€åå‘ç°æ˜¯è‡ªå·±çš„commitå‡ºé—®é¢˜ğŸ˜†

åœ¨è½¯ä»¶å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºæµ‹è¯•è¦†ç›–ç‡ä½ï¼Œæ²¡æ—¶é—´å›å½’æµ‹è¯•ç­‰ç­‰åŸå› ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µå°±æ˜¯ï¼ŒæŸä¸ªfeatureæ˜æ˜å‰å‡ å¤©è¿˜å¥½å¥½çš„ï¼Œä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹å°±å‡ºBugäº†â€¦â€¦ç„¶åhmmï¼Œæœ€ç¬¨çš„æ–¹æ³•å°±æ˜¯å€’å›å»ä¸€ä¸ªä¸€ä¸ªcommitçš„checkoutå‡ºæ¥æŸ¥æ‰¾å•¦ï¼Œç¨å¾®æ²¡é‚£ä¹ˆç¬¨çš„æ–¹æ³•å°±æ˜¯è·Ÿç‰ˆæœ¬æ¥æŸ¥æ‰¾ï¼Œç„¶åæ‰‹åŠ¨äººå·¥ç”¨äºŒäººåˆ†æ³•ï¼ˆæˆ‘ä»¥å‰å°±ä¸€ç›´æ˜¯è¿™ä¹ˆåšçš„ï¼Œè¿˜ä»¥ä¸ºè‡ªå·±å¾ˆèªæ˜å‘¢ï¼Œæ•°commitæ•°åˆ°å¤´æ™•ğŸ˜‚ï¼‰

## git bisect
> This command uses a binary search algorithm to find which commit in your projectâ€™s history introduced a bug. [^1]

`git bisect`åšçš„äº‹æƒ…å…¶å®å°±è·Ÿäººæ‰‹åšçš„äº‹æƒ…æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸ç”¨è‡ªå·±å»æ•°commitï¼Œcommandä¼šè‡ªåŠ¨å®šä½åˆ°äºŒåˆ†æ³•åŒºé—´ä¸­ç‚¹çš„commitå¹¶checkout

ä¸¾ä¸ªğŸŒ°ï¼š 
å‡å¦‚åœ¨developåˆ†æ”¯ä¸­æœ‰ABCDEFGè¿™å‡ ä¸ªcommitï¼ŒAæœ€æ–°ï¼ŒGæœ€æ—§ï¼Œå·²Aæœ‰bugä½†Gæ²¡æœ‰bugï¼Œæƒ³è¦æ‰¾å‡ºA-Gä¸­æœ€æ—©å‡ºç°bugçš„commitï¼Œå‡è®¾æœ€ç»ˆæ‰¾åˆ°æœ‰bugçš„commitæ˜¯Eã€‚

é‚£ä¹ˆé¦–å…ˆcheckout developåˆ†æ”¯ï¼Œç„¶å
```
git bisect start
git bisect bad
```
ç„¶å checkout G commit
```
git bisect good
```
æ­¤æ—¶gitä¼šè‡ªåŠ¨checkout D commit å¹¶æ˜¾ç¤ºè¿˜å‰©ä¸‹3ä¸ªcommitéœ€è¦æ£€æŸ¥ï¼Œç„¶åæˆ‘ä»¬ä¸åœçš„é‡å¤ä»¥ä¸Šæ ‡è®°`good`å’Œ`bad`çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰¾å‡ºæœ‰é—®é¢˜çš„commit Eï¼Œæ­¤æ—¶ä¼šæ˜¾ç¤ºè¿˜å‰©ä¸‹0ä¸ªcommitéœ€è¦æ£€æŸ¥ï¼Œ è®°ä¸‹è¿™ä¸ªcommitçš„hashï¼ˆä¸çŸ¥é“è¿™ä¸€æ­¥æœ‰æ²¡æœ‰ä»€ä¹ˆè‡ªåŠ¨è®°ä¸‹çš„æ–¹æ³•ï¼Ÿï¼‰ï¼Œç„¶å
```
git bisect reset
```
ä¹‹åä¼šè‡ªåŠ¨å›åˆ°developåˆ†æ”¯ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹fixupäº†ã€‚

ä»¥ä¸Šã€‚

[^1]: https://git-scm.com/docs/git-bisect