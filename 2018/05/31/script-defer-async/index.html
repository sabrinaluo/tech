<!DOCTYPE html>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    å¦‚ä½•å»¶è¿ŸåŠ è½½script(defer, async) | å°ç™½å¦¹å¦¹å†™ä»£ç 
  </title>
  <meta name="description" content="JavaScriptæ˜¯ä¸–ç•Œä¸Šç¬¬äºŒå¥½çš„è¯­è¨€ğŸ˜">
  
  <meta name="keywords" content="
  html,head,script,async,defer
  ">
  
  <meta name="author" content="HiiTea">

  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#1e2327">
  <link rel="apple-touch-icon" href="https://github.githubassets.com/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://github.githubassets.com/apple-touch-icon-180x180.png">

  <link rel="icon" type="image/x-icon" href="https://github.githubassets.com/favicon.ico">
  <link rel="stylesheet" href="/tech/css/main.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52574938-4', 'auto');
  ga('send', 'pageview');
</script>


  
<script>
  var _hmt = _hmt || [];
  (function(){var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?d8749b933af749e1e5ec931bb403628f";
    var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm, s);})();
</script>


  <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
</head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/tech/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <div class="navbar-search-form">
          <label for="gsc-i-id1">This website</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div>
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/tech/archives">Archives</a></li>
        
        
        <li><a href="/tech/categories">Categories</a></li>
        
        
        <li><a href="/tech/tags">Tags</a></li>
        
        
        <li class="desktop-only"><a href="/tech/atom.xml" target="_blank">RSS</a></li>
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="https://avatars2.githubusercontent.com/u/5300359?v=4&amp;s=460"> <i class="fa fa-caret-down"></i></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/tech/archives" class="header-toolbar-left"><i
                  class="fa fa-file-text"></i> Posts </a>
        <a href="/tech/archives"
           class="header-toolbar-right"> 56 </a>
      </li>
      <li>
        <a href="/tech/tags" class="header-toolbar-left"><i
                  class="fa fa-tags"></i> Tags </a>
        <a href="/tech/tags"
           class="header-toolbar-right"> 162 </a>
      </li>
      <li>
        <a href="/tech/categories" class="header-toolbar-left"><i
                  class="fa fa-folder-open"></i> Categories </a>
        <a href="/tech/categories"
           class="header-toolbar-right"> 23 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/tech/">å°ç™½å¦¹å¦¹å†™ä»£ç </a>
      
      
    </h2>
  </div>

  <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div>
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    HiiTea

    <span class="post-date float-right" title="{{moment(1527751109000).format('MMM DD, YYYY, h:mm:ss A')}}">
      <i class="fa fa-pencil-square-o"></i>
      {{moment(1527751109000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1>å¦‚ä½•å»¶è¿ŸåŠ è½½script(defer, async)</h1>
    <p><code>&lt;script&gt;</code>çš„ä¸‹è½½å’Œæ‰§è¡Œéƒ½ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œå› æ­¤å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æŠŠ<code>&lt;script&gt;</code>æ”¾åœ¨<code>&lt;body&gt;</code>çš„åº•éƒ¨ï¼Œæ¸²æŸ“å®Œå‰é¢çš„htmlå†…å®¹ä¹‹åæ‰åŠ è½½å’Œæ‰§è¡ŒJSã€‚</p>
<p>ç„¶è€Œæœ‰æ—¶ç”±äºæŸäº›é™åˆ¶ï¼ŒåªæŠŠæŸäº›<code>&lt;script&gt;</code>æ”¾åœ¨<code>&lt;head&gt;</code>é‡Œï¼Œä½†åˆä¸å¸Œæœ›é¡µé¢æ¸²æŸ“è¢«é˜»å¡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨<code>async</code>æˆ–<code>defer</code>å±æ€§æ¥å»¶è¿ŸåŠ è½½ã€æ¸²æŸ“ã€‚</p>
<p>ä¸€å¼ å›¾èƒœè¿‡åƒè¨€ä¸‡è¯­<a href="https://stackoverflow.com/a/39711009/3821392" target="_blank" rel="noopener">^1</a><br><img src="https://i.stack.imgur.com/wfL82.png" alt="image"></p>
<h3 id="script"><a href="#script" class="headerlink" title="script"></a>script</h3><p>å¦‚æœæ²¡æœ‰åŠ ä»»ä½•ä¸å»¶è¿ŸåŠ è½½ç›¸å…³çš„å±æ€§ï¼Œæµè§ˆå™¨ä¼šå…ˆåŠ è½½ã€ç„¶åæ‰§è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šé˜»å¡åé¢å†…å®¹çš„æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ç­‰<code>&lt;script&gt;</code>åŠ è½½å¹¶æ‰§è¡Œä¹‹åï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“ä¹‹åçš„å†…å®¹ã€‚</p>
<h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>å› ä¸ºå¯èƒ½å­˜åœ¨ç±»ä¼¼éœ€æ±‚ï¼šåœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä½¿ç”¨<code>document.write</code>ï¼Œå› æ­¤éœ€è¦é˜»å¡æ¸²æŸ“</p>
<h3 id="async"><a href="#async" class="headerlink" title="async"></a>async</h3><p>å¦‚æœæ·»åŠ äº†<code>async</code>å±æ€§ï¼Œæµè§ˆå™¨ä¼šå¹¶è¡Œçš„ä¸€è¾¹æ¸²æŸ“é¡µé¢ä¸€è¾¹åŠ è½½è„šæœ¬ã€‚ä¸€æ—¦è„šæœ¬åŠ è½½å®Œæˆï¼Œå°±ä¼šæ‰§è¡Œè„šæœ¬ï¼Œæ‰§è¡Œè„šæœ¬çš„è¿‡ç¨‹ä¼šé˜»å¡åç»­å†…å®¹çš„æ¸²æŸ“ã€‚</p>
<p><strong>!!!æ³¨æ„: ç”±äºæ˜¯åŠ è½½å®Œæˆå°±ç«‹åˆ»æ‰§è¡Œï¼Œå› æ­¤æ‰§è¡Œé¡ºåºæ˜¯æ— æ³•ä¿è¯çš„ï¼</strong><br><code>async</code>æ˜¯html5ä¸­æ‰æœ‰çš„å±æ€§ï¼Œå› æ­¤éœ€è¦æ³¨æ„æ—§çš„æµè§ˆå™¨ä¸æ”¯æŒæ­¤å±æ€§</p>
<h3 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h3><p>å¦‚æœæ·»åŠ äº†<code>defer</code>å±æ€§ï¼Œæµè§ˆå™¨ä¼šå¹¶è¡Œçš„ä¸€è¾¹æ¸²æŸ“é¡µé¢ä¸€è¾¹åŠ è½½è„šæœ¬ã€‚ç­‰åˆ°é¡µé¢å†…å®¹å®Œå…¨æ¸²æŸ“å®Œæˆä¹‹åæ‰å¼€å§‹æ‰§è¡Œï¼Œèƒ½å¤ŸèŠ‚çº¦ä¸€ç‚¹åŠ è½½æ—¶é—´ï¼ˆå› ä¸ºæ˜¯å¹¶è¡Œçš„ï¼‰ã€‚è¿™ä¹ˆçœ‹æ¥ä½¿ç”¨<code>defer</code>è·Ÿæ”¾åœ¨<code>body</code>åº•éƒ¨æ•ˆæœå·®ä¸å¤šï¼Œç”šè‡³æ›´èƒœä¸€ç­¹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆç°åœ¨è¿˜æœ‰å¾ˆå¤šäººè¿˜åœ¨ä½¿ç”¨åè€…(bodyåº•éƒ¨)è¿™ç§æ–¹å¼å‘¢ï¼Œè¿™ä¸¤ç§æ–¹å¼åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ<a href="https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work" target="_blank" rel="noopener">^2</a></p>
<h4 id="å†å²å°çŸ¥è¯†"><a href="#å†å²å°çŸ¥è¯†" class="headerlink" title="å†å²å°çŸ¥è¯†"></a>å†å²å°çŸ¥è¯†</h4><p>æœ€æ—©å®ç°<code>defer</code>çš„æ˜¯IE4ï¼Œç„¶è€Œåœ¨IE4-9ä¸­çš„å®ç°å¹¶æ²¡æœ‰æŒ‰ç…§WHATWGçš„æ ‡å‡†<a href="https://www.html5rocks.com/en/tutorials/speed/script-loading/" target="_blank" rel="noopener">^3</a>ï¼Œè¿™ä¸ªbugä½¿å¾—æ‰§è¡Œè„šæœ¬æ—¶çš„<strong>é¡ºåºæ— æ³•å¾—åˆ°ä¿è¯</strong>ã€‚</p>
<blockquote>
<p>deferred scripts should run after the document had parsed, in the order they were added. <a href="https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer" target="_blank" rel="noopener">^4</a></p>
</blockquote>
<blockquote>
<p>The defer attribute may be specified with the async attribute, so legacy browsers that only support defer (and not async) fall back to the defer behavior instead of the default blocking behavior <a href="https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer" target="_blank" rel="noopener">^4</a></p>
</blockquote>
<p><strong>!!!æ³¨æ„ï¼š</strong><br>ä¸ºäº†é¿å…åœ¨æ—§çš„IEæµè§ˆå™¨ä¸Šï¼Œè„šæœ¬çš„æ‰§è¡Œé¡ºåºä¸ç¬¦åˆé¢„æœŸï¼Œå› æ­¤å¤§å¤šæ•°æ—¶å€™è¿˜æ˜¯ä½¿ç”¨å°†è„šæœ¬æ”¾åœ¨<code>body</code>åº•éƒ¨çš„æ–¹å¼</p>
<h3 id="IMPORTANT"><a href="#IMPORTANT" class="headerlink" title="IMPORTANT"></a>IMPORTANT</h3><blockquote>
<p>The <code>defer</code> and <code>async</code> attributes <strong>must not</strong> be specified if the src attribute is <strong>absent</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement#" target="_blank" rel="noopener">^5</a></p>
</blockquote>
<h3 id="body-bottom"><a href="#body-bottom" class="headerlink" title="body bottom"></a>body bottom</h3><p>å°†<code>&lt;script&gt;</code>æ”¾åœ¨<code>body</code>åº•éƒ¨ï¼Œèƒ½å¤Ÿä¿è¯è„šæœ¬æŒ‰ç…§é¡ºåºåŠ è½½åŠæ‰§è¡Œï¼Œç¼ºç‚¹æ˜¯æ— æ³•èŠ‚çº¦åŠ è½½æ—¶é—´</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>[1] <a href="https://stackoverflow.com/a/39711009/3821392" target="_blank" rel="noopener">https://stackoverflow.com/a/39711009/3821392</a><br>[2] <a href="https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work" target="_blank" rel="noopener">https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work</a><br>[3] <a href="https://www.html5rocks.com/en/tutorials/speed/script-loading/" target="_blank" rel="noopener">https://www.html5rocks.com/en/tutorials/speed/script-loading/</a><br>[4] <a href="https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer" target="_blank" rel="noopener">https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer</a><br>[5] <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement#" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement#</a></p>

  </article>
</div>


    
<div class="container disqus-container">
  <div id="disqus_thread"></div>
</div>

<script>
  var disqus_config = function() {
    this.page.url = "https://sabrinaluo.github.io/tech/2018/05/31/script-defer-async/";
    this.page.identifier = 1527751109;
  };

  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://hiitea-tech.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>





</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <div class="clearfix">
    <a href="https://sabrinaluo.github.io/tech" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>Â© 2019 HiiTea</li>
      <li><a href="https://sabrinaluo.github.io/tech">Home</a></li>
      
      <li><a href="https://github.com/sabrinaluo">Github</a></li>
      
      <li><a href="http://weibo.com/206663121">Weibo</a></li>
      
    </ul>
    <div class="footer-theme-info">
      Theme <a href="//github.com/sabrinaluo/hexo-theme-replica">Replica</a>
      by <a href="//github.com/sabrinaluo">Hiitea</a> â¤ Powered by Hexo
    </div>
    </div>
    
    <div class="footer-pageview">
        <a href="https://info.flagcounter.com/mx4Y">
          <img src="//s01.flagcounter.com/count/mx4Y/bg_FFFFFF/txt_000000/border_FFFFFF/columns_3/maxflags_9/viewers_3/labels_0/pageviews_1/flags_0/percent_0/">
        </a>
    </div>
    
  </footer>
</div>


<script>
  (function() {
    var cx = '015579750388200492852:dnpv83myu4a';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>



<script src="/tech/js/main.js"></script>

</body>
</html>
